<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoMoose - Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --color-bg: #0a0b0c;
            --color-surface: #16181a;
            --color-primary: #00ff9d;
            --color-secondary: #94a3b8;
            --color-text: #ffffff;
            --color-text-dim: rgba(255, 255, 255, 0.7);
            --color-background: #1a1d23;
            --color-border: #2f343a;
            --color-border-rgb: 47, 52, 58;
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding-top: 80px;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .welcome-section {
            text-align: center;
            margin: 0.8rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
        }

        .welcome-section h1 {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 0.25rem;
        }

        .welcome-section p {
            color: var(--color-text-dim);
            font-size: 0.9rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: rgba(20, 20, 20, 0.6);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            background: rgba(30, 30, 30, 0.8);
            border-color: var(--color-primary);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: rgba(0, 255, 157, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .card-icon i {
            font-size: 1.5rem;
            color: var(--color-primary);
        }

        .card-content h2, .card-content h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 0 0.5rem;
            color: var(--color-text);
        }

        .feature-description {
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: var(--color-text-dim);
        }

        .feature-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.3rem;
            margin-bottom: 1rem;
            list-style: none;
            padding: 0;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.3rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .feature-item i {
            font-size: 1rem;
            color: var(--color-primary);
        }

        .feature-item span {
            font-size: 0.85rem;
            color: var(--color-text);
        }

        .feature-button, .btn-action {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            background: var(--color-primary);
            color: white;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 500;
            transition: transform 0.2s ease;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-top: 0.8rem;
        }

        .feature-button:hover, .btn-action:hover {
            transform: translateY(-2px);
        }

        .feature-button i, .btn-action i {
            font-size: 0.9rem;
            transition: transform 0.2s ease;
        }

        .feature-button:hover i, .btn-action:hover i {
            transform: translateX(5px);
        }

        .card-stats {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
        }

        .stat {
            flex: 1;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--color-text-dim);
        }

        .opportunity-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.8rem;
            margin-top: 0.8rem;
        }

        .opportunity-links .feature-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            color: var(--color-text);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .opportunity-links .feature-button:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .opportunity-links .feature-button i {
            font-size: 1.1rem;
            color: var(--color-secondary);
        }

        /* Nav Styles */
        .nav {
            background: rgba(18, 18, 18, 0.8);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left, .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-container {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #ffffff;
            gap: 0.5rem;
        }

        .logo-container img {
            height: 32px;
            width: auto;
        }

        .nav-link {
            color: var(--color-text);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-link i {
            font-size: 1rem;
        }

        .nav-link span {
            font-size: 0.9rem;
        }

        .nav-link.twitter {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            margin-left: 12px;
        }

        .nav-link.twitter:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Language Selector Styles */
        .language-selector {
            position: relative;
            margin-right: 1rem;
            z-index: 1000;
        }

        .language-selector select {
            appearance: none;
            background: rgba(0, 255, 157, 0.1);
            border: 1px solid var(--color-primary);
            color: var(--color-text);
            padding: 0.5rem 2.5rem 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 120px;
        }

        .language-selector select:hover {
            background: rgba(0, 255, 157, 0.2);
            border-color: var(--color-primary);
        }

        .language-selector select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(0, 255, 157, 0.2);
        }

        .language-selector::after {
            content: '\f0d7';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-primary);
            pointer-events: none;
            font-size: 0.8rem;
        }

        /* AI Insights Styles */
        .ai-insights-section {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 1.25rem;
            margin: 1rem 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--color-border);
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--color-border);
        }

        .insights-header h2 {
            font-size: 1.25rem;
            margin: 0;
            color: var(--color-primary);
            font-weight: 600;
        }

        #insightCoin {
            padding: 0.35rem 0.75rem;
            font-size: 0.9rem;
            border-radius: 6px;
            border: 1px solid var(--color-border);
            background: var(--color-background);
            color: var(--color-text);
        }

        .refresh-btn {
            padding: 0.35rem 0.75rem;
            font-size: 0.9rem;
            border-radius: 6px;
            background: var(--color-primary);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .refresh-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .metric {
            padding: 0.75rem;
            font-size: 0.85rem;
            background: var(--color-background);
            border-radius: 8px;
            border: 1px solid var(--color-border);
            text-align: center;
        }

        .metric .value {
            font-size: 1rem;
            margin-top: 0.25rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .technical-stance {
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            background: var(--color-background);
            border-radius: 6px;
            border: 1px solid var(--color-border);
        }

        .stance-value.bullish { color: #34D399; }
        .stance-value.bearish { color: #EF4444; }
        .stance-value.neutral { color: #FCD34D; }

        .insight-details h4 {
            color: var(--color-primary);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .insight-details li {
            padding: 0.35rem 0;
            border-bottom: 1px solid rgba(var(--color-border-rgb), 0.1);
            line-height: 1.4;
        }

        .insight-details li:last-child {
            border-bottom: none;
        }

        .insight-footer {
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--color-border);
            font-size: 0.85rem;
        }

        .sentiment-score .score {
            font-size: 1.1rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            background: var(--color-background);
        }

        .score.positive { color: #34D399; }
        .score.negative { color: #EF4444; }
        .score.neutral { color: #FCD34D; }

        .last-updated {
            color: var(--color-text-dim);
            font-style: italic;
        }

        /* Insight Content Styles */
        .insight-content {
            margin-top: 2rem;
            display: grid;
            grid-gap: 2rem;
        }

        .insight-main {
            background: var(--color-background);
            padding: 1.25rem;
            border-radius: 8px;
            border: 1px solid var(--color-border);
        }

        .technical-stance {
            font-size: 0.95rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: rgba(var(--color-background-rgb), 0.5);
            border-radius: 6px;
        }

        .stance-value {
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .stance-value.bullish { color: #34D399; }
        .stance-value.bearish { color: #EF4444; }
        .stance-value.neutral { color: #FCD34D; }

        .key-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .metric {
            background: rgba(var(--color-background-rgb), 0.5);
            padding: 0.75rem;
            border-radius: 6px;
            text-align: center;
        }

        .metric .value {
            display: block;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 0.25rem;
            color: var(--color-primary);
        }

        .price-levels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .price-levels h4 {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--color-text-dim);
        }

        .price-levels ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .price-levels li {
            padding: 0.35rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(var(--color-border-rgb), 0.1);
        }

        .insight-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem;
        }

        .insight-details h4 {
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
            color: var(--color-primary);
            font-weight: 600;
        }

        .insight-details ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .insight-details li {
            padding: 0.5rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(var(--color-border-rgb), 0.1);
            line-height: 1.4;
        }

        .outlook {
            grid-column: span 2;
        }

        .outlook p {
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 0;
        }

        .insight-footer {
            grid-column: span 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--color-border);
        }

        .sentiment-score {
            font-size: 0.9rem;
        }

        .sentiment-score .score {
            font-size: 1.1rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            background: rgba(var(--color-background-rgb), 0.5);
        }

        .score.positive { color: #34D399; }
        .score.negative { color: #EF4444; }
        .score.neutral { color: #FCD34D; }

        .last-updated {
            color: var(--color-text-dim);
            font-size: 0.85rem;
            font-style: italic;
        }

        /* Make the modal content scrollable */
        .modal-content {
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-content {
            background: var(--color-surface);
            margin: 2% auto;
            padding: 3rem;
            border: 1px solid var(--color-border);
            border-radius: 16px;
            width: 95%;
            max-width: 1000px;
            position: relative;
            min-height: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .insight-controls {
            display: flex;
            gap: 1.5rem;
            align-items: center;
            margin-bottom: 2rem;
        }

        .technical-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        @media (max-width: 1024px) {
            .insight-content {
                grid-template-columns: 1fr;
            }

            .insight-details {
                grid-template-columns: 1fr;
            }

            .outlook, .insight-footer {
                grid-column: span 1;
            }
        }

        /* Modal Styles */
        #dailyUpdateModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
        }

        .close-button {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text);
            background: none;
            border: none;
            padding: 5px 10px;
        }

        .close-button:hover {
            color: var(--color-primary);
        }

        .daily-update-button {
            background: var(--color-primary);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .daily-update-button:hover {
            opacity: 0.9;
        }

        /* Media Queries */
        @media screen and (max-width: 1200px) {
            .container {
                max-width: 95%;
                padding: 0.8rem;
            }
            
            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
            }
        }

        @media screen and (max-width: 992px) {
            .nav-content {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-left, .nav-right {
                width: 100%;
                justify-content: center;
            }

            .feature-card {
                padding: 1.2rem;
            }
        }

        @media screen and (max-width: 768px) {
            .container {
                padding: 0.6rem;
            }

            .welcome-section h1 {
                font-size: 1.5rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }

            .feature-card {
                min-height: auto;
                padding: 0.8rem;
            }

            .feature-list {
                grid-template-columns: 1fr;
            }

            .btn-action {
                width: 100%;
                justify-content: center;
            }

            .opportunity-links {
                grid-template-columns: 1fr;
            }
        }

        @media screen and (max-width: 480px) {
            .welcome-section h1 {
                font-size: 1.2rem;
            }

            .nav .btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }

            .card-content h2, .card-content h3 {
                font-size: 1.1rem;
            }

            .feature-item {
                padding: 0.4rem;
                font-size: 0.8rem;
            }

            .feature-item i {
                font-size: 0.8rem;
            }

            .btn-action {
                padding: 0.5rem 0.8rem;
                font-size: 0.8rem;
            }
        }

        .feature-card.signals {
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.1) 0%, rgba(22, 24, 26, 1) 100%);
            border: 1px solid var(--color-border);
        }

        .feature-card.signals:hover {
            border-color: var(--color-primary);
            transform: translateY(-5px);
        }

        .feature-card.signals .card-icon {
            color: var(--color-primary);
        }

        .feature-card.signals h2 {
            color: var(--color-primary);
        }

        .feature-card.signals .feature-description ul li {
            color: var(--color-text-dim);
        }

        .feature-card.signals .feature-button {
            background: var(--color-primary);
            color: var(--color-bg);
        }

        .feature-card.signals .feature-button:hover {
            background: var(--color-text);
        }

        @media screen and (max-width: 768px) {
            .feature-card.signals {
                padding: 0.8rem;
            }
        }

        /* Market Overview Styles */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .metric-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-label {
            display: block;
            font-size: 0.9rem;
            color: var(--color-text-dim);
            margin-bottom: 0.5rem;
        }

        .market-levels-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .market-levels-group h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--color-text);
        }

        .market-level {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            margin: 0.25rem 0;
            border-radius: 6px;
            text-align: center;
        }

        .chain-volumes-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 0.8rem;
            margin: 0.8rem 0;
            font-size: 0.9rem;
        }

        .chain-volumes-section h3 {
            font-size: 1rem;
            margin: 0 0 0.6rem 0;
            color: var(--color-text-dim);
        }

        .chain-volumes {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .chain-symbol {
            font-weight: 500;
        }

        .volume-change {
            text-align: right;
        }

        .volume-change.positive {
            color: var(--color-primary);
        }

        .volume-change.negative {
            color: #ef4444;
        }

        .volume-share {
            text-align: right;
            color: var(--color-text-dim);
        }

        .insight-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .insight-column h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .insight-column ul {
            list-style: none;
            padding: 0;
        }

        .insight-column li {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            margin: 0.25rem 0;
        }

        .outlook-section,
        .events-section {
            margin: 1.5rem 0;
        }

        .outlook-section h3,
        .events-section h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .sentiment-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--color-border);
        }

        .sentiment-score {
            color: var(--color-primary);
            font-weight: 600;
            font-size: 1.2rem;
        }

        .last-update-label {
            margin-left: auto;
            color: var(--color-text-dim);
            font-size: 0.9rem;
        }

        @media screen and (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .market-levels-section {
                grid-template-columns: 1fr;
            }

            .chain-volume-item {
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
            }

            .chain-volume-item > * {
                text-align: left;
            }

            .insight-grid {
                grid-template-columns: 1fr;
            }
        }

        .outlook-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .outlook-section h3 {
            margin: 0 0 0.8rem 0;
            color: var(--color-text-dim);
        }

        .outlook-summary {
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--color-text);
        }

        .outlook-analysis {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .outlook-analysis li {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            margin: 0.25rem 0;
            font-size: 0.9rem;
            color: var(--color-text-dim);
        }

        .events-list li {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin: 0.5rem 0;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .events-list li::before {
            content: "📅";
            margin-right: 0.5rem;
        }

        .event-title {
            font-weight: 500;
            color: var(--color-text);
        }

        .event-details {
            color: var(--color-text-dim);
            padding-left: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html" class="logo-container">
                    <img src="images/moose.png" alt="CryptoMoose" style="height: 32px; width: auto;">
                    <span>CryptoMoose</span>
                </a>
                <a href="dashboard.html" class="nav-link active">
                    <i class="fas fa-chart-bar"></i>
                    <span>Dashboard</span>
                </a>
                <a href="signals.html" class="nav-link">
                    <i class="fas fa-signal"></i>
                    <span>Signals</span>
                </a>
                <a href="segment-projections.html" class="nav-link">
                    <i class="fas fa-layer-group"></i>
                    <span>Segment Projections</span>
                </a>
                <a href="members.html" class="nav-link">
                    <i class="fas fa-robot"></i>
                    <span>AI Market Insights</span>
                </a>
            </div>
            <div class="nav-right">
                <div class="language-selector">
                    <select id="languageSelect" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="ru">Русский</option>
                        <option value="no">Norsk</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                    </select>
                </div>
                <a href="https://t.me/cryptomoose" target="_blank" class="btn-telegram">
                    <i class="fab fa-telegram"></i>
                    <span>Get Live Signals on Telegram</span>
                </a>
                <a href="https://x.com/XCryptoMoose" target="_blank" class="nav-link twitter">
                    <img src="images/x-logo.svg" alt="X (Twitter)" style="height: 16px; width: 16px;">
                    <span>Follow Alpha</span>
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="welcome-section">
            <h1>Welcome to CryptoMoose</h1>
            <p>Your comprehensive platform for cryptocurrency trading and analysis</p>
            <button class="daily-update-button" id="openModalBtn">
                <i class="fas fa-newspaper"></i>
                Daily Update
            </button>
        </div>

        <!-- Simple Modal -->
        <div id="dailyUpdateModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Daily Market Update</h2>
                    <button id="closeModalBtn" class="close-btn">&times;</button>
                    <button id="refreshInsight" class="refresh-btn">↻</button>
                </div>
                <div id="loadingUpdate" class="loading-container">
                    Loading...
                </div>
                <div id="updateError" class="error-message" style="display: none;">
                    Failed to fetch market overview
                </div>
                <div id="updateContent" class="modal-body">
                    <!-- Technical Stance -->
                    <div class="insight-section">
                        <div class="technical-stance">
                            <span class="stance-label">Technical Stance:</span>
                            <span class="stance-value">Loading...</span>
                        </div>
                    </div>

                    <!-- Market Metrics -->
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">Market Cap Change</span>
                            <span class="market-cap-change">Loading...</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Market Trend</span>
                            <span class="market-trend">Loading...</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Volume Analysis</span>
                            <span class="volume-analysis">Loading...</span>
                        </div>
                    </div>

                    <!-- Key Market Levels -->
                    <div class="market-levels-section">
                        <div class="market-levels-group">
                            <h3>Total Market Cap</h3>
                            <div class="market-cap-levels"></div>
                        </div>
                        <div class="market-levels-group">
                            <h3>BTC Dominance</h3>
                            <div class="dominance-levels"></div>
                        </div>
                    </div>

                    <!-- Chain Volumes -->
                    <div class="chain-volumes-section">
                        <h3>Chain Volumes (24h)</h3>
                        <div class="chain-volumes"></div>
                    </div>

                    <!-- Key Catalysts and Risks -->
                    <div class="insight-grid">
                        <div class="insight-column">
                            <h3>Key Catalysts</h3>
                            <ul class="catalysts-list"></ul>
                        </div>
                        <div class="insight-column">
                            <h3>Key Risks</h3>
                            <ul class="risks-list"></ul>
                        </div>
                    </div>

                    <!-- Market Outlook -->
                    <div class="outlook-section">
                        <h3>Market Outlook</h3>
                        <p class="outlook-summary"></p>
                        <ul class="outlook-analysis"></ul>
                    </div>

                    <!-- Upcoming Events -->
                    <div class="events-section">
                        <h3>Upcoming Events</h3>
                        <ul class="events-list"></ul>
                    </div>

                    <!-- Sentiment Score -->
                    <div class="sentiment-section">
                        <span class="sentiment-label">Sentiment Score:</span>
                        <span class="sentiment-score">0</span>/10
                        <span class="last-update-label">Updated: <span class="last-update"></span></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Grid -->
        <div class="feature-grid">
            <!-- Signals Card -->
            <div class="feature-card premium-signals">
                <div class="card-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="card-content">
                    <h3>Signaler</h3>
                    <p>Avanserte handelssignaler drevet av multiindikatorstrategi</p>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Real-time EMA, RSI & Volume analysis</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>15+ major cryptocurrency pairs</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Telegram notifications</span>
                        </li>
                    </ul>
                    <div class="button-wrapper">
                        <a href="signals.html" class="btn-action">
                            <span>Se signaler</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Original cards follow -->
            <div class="feature-card gem-hunter">
                <div class="card-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="card-content">
                    <h3>AI Gemmejeger</h3>
                    <p>Oppdag lovende kryptoprosjekter med lav markedsverdi ved hjelp av avansert AI-analyse</p>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>AI-powered project scoring</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk assessment & analysis</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Real-time sentiment tracking</span>
                        </li>
                    </ul>
                    <div class="button-wrapper">
                        <a href="gem-hunter.html" class="btn-action">
                            <span>Åpne Gemmejeger</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="feature-card daily-digest">
                <div class="card-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <div class="card-content">
                    <h3>Daglig markedsoppdatering</h3>
                    <p>Stay informed with our daily market analysis and insights</p>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Market Sentiment Analysis</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Key Price Levels</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Trading Opportunities</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk Assessment</span>
                        </li>
                    </ul>
                    <div class="button-wrapper">
                        <a href="daily_digest.html" class="btn-action">
                            <span>View Today's Update</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="feature-card segment-projections">
                <div class="card-icon">
                    <i class="fas fa-layer-group"></i>
                </div>
                <div class="card-content">
                    <h3>Market Segments</h3>
                    <p>Track and analyze different market segments and their performance</p>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>DeFi Sector Analysis</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>NFT Market Trends</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Layer-1 Performance</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>GameFi Growth Metrics</span>
                        </li>
                    </ul>
                    <div class="button-wrapper">
                        <a href="segments.html" class="btn-action">
                            <span>View Segments</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="feature-card learning">
                <div class="card-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="card-content">
                    <h3 class="learning-title"></h3>
                    <p class="learning-desc"></p>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span class="learning-feature-1"></span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span class="learning-feature-2"></span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span class="learning-feature-3"></span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span class="learning-feature-4"></span>
                        </li>
                    </ul>
                    <div class="button-wrapper">
                        <a href="learning.html" class="btn-action">
                            <span class="learning-button"></span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="feature-card ai-insights">
                <div class="card-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="card-content">
                    <h2>AI Insights</h2>
                    <div class="feature-description">
                        <p>Get advanced AI-powered market insights and predictions</p>
                        <div class="feature-list">
                            <div class="feature-item">
                                <i class="fas fa-brain"></i>
                                <span>Pattern Recognition</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-chart-line"></i>
                                <span>Trend Prediction</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-search-dollar"></i>
                                <span>Market Opportunities</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>Risk Analysis</span>
                            </div>
                        </div>
                    </div>
                    <div class="button-wrapper">
                        <a href="members.html" class="btn-action">
                            <span>View AI Insights</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="feature-card opportunities">
                <div class="card-icon">
                    <i class="fas fa-rocket"></i>
                </div>
                <div class="card-content">
                    <h2>Opportunities</h2>
                    <div class="feature-description">
                        <p>Discover high-potential opportunities across the crypto market</p>
                        <div class="feature-list">
                            <div class="feature-item">
                                <i class="fas fa-chart-line"></i>
                                <span>Breakout Alerts</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-percentage"></i>
                                <span>DeFi Yields</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-gem"></i>
                                <span>NFT Opportunities</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-coins"></i>
                                <span>Token Sales</span>
                            </div>
                        </div>
                    </div>
                    <div class="button-wrapper">
                        <a href="opportunities.html" class="btn-action">
                            <span>View Opportunities</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/translations.js"></script>
    <script type="module" src="js/components/market-overview.js"></script>
    <script>
        // Language handling functions
        function changeLanguage(lang) {
            document.documentElement.lang = lang;
            localStorage.setItem('preferredLanguage', lang);
            updateContent(lang);
        }

        function updateContent(lang) {
            const t = translations[lang];
            
            // Update welcome section
            document.querySelector('.welcome-section h1').textContent = t.welcome;
            document.querySelector('.welcome-section p').textContent = t.welcomeSubtitle;
            document.querySelector('.daily-update-button').innerHTML = `
                <i class="fas fa-newspaper"></i>
                ${t.dailyUpdate}
            `;

            // Update navigation items
            document.querySelector('.nav-link[href="dashboard.html"] span').textContent = t.dashboard;
            document.querySelector('.nav-link[href="signals.html"] span').textContent = t.signals;
            document.querySelector('.nav-link[href="segment-projections.html"] span').textContent = t.marketSegments;
            document.querySelector('.nav-link[href="members.html"] span').textContent = t.aiInsights;
            
            // Update Telegram and Twitter buttons
            document.querySelector('.btn-telegram span').textContent = t.joinTelegram;
            document.querySelector('.nav-link.twitter span').textContent = t.followAlpha;

            // Update all feature cards
            const cards = {
                'premium-signals': {
                    title: t.signals,
                    description: t.signalsDesc,
                    features: [t.realTimeSignals, t.multiIndicator, t.telegramNotifications],
                    button: t.viewSignals
                },
                'gem-hunter': {
                    title: t.gemHunter,
                    description: t.gemHunterDesc,
                    features: [t.aiProjectScanning, t.riskAssessment, t.sentimentTracking],
                    button: t.viewGemHunter
                },
                'segment-projections': {
                    title: t.marketSegments,
                    description: t.segmentsDesc,
                    features: [t.defiAnalysis, t.nftTrends, t.layer1Performance, t.growthMetrics],
                    button: t.viewSegmentProjections
                },
                'ai-insights': {
                    title: t.aiInsights,
                    description: t.aiDesc,
                    features: [t.patternRecognition, t.trendPrediction, t.marketAnalysis],
                    button: t.viewAiInsights
                },
                'daily-digest': {
                    title: t.dailyUpdate,
                    description: "Stay informed with our daily market analysis and insights",
                    features: ["Market Sentiment Analysis", "Key Price Levels", "Trading Opportunities", "Risk Assessment"],
                    button: "View Today's Update"
                },
                'learning': {
                    title: t.learningTitle,
                    description: t.learningDesc,
                    features: [t.tradingFundamentals, t.technicalAnalysis, t.riskManagement, t.advancedTrading],
                    button: t.startLearning
                },
                'opportunities': {
                    title: "Opportunities",
                    description: "Discover high-potential opportunities across the crypto market",
                    features: ["Breakout Alerts", "DeFi Yields", "NFT Opportunities", "Token Sales"],
                    button: "View Opportunities"
                }
            };

            // Update each card
            Object.keys(cards).forEach(cardClass => {
                const card = document.querySelector(`.feature-card.${cardClass}`);
                if (card) {
                    const cardData = cards[cardClass];
                    
                    // Update title
                    const titleEl = card.querySelector('h2, h3');
                    if (titleEl) titleEl.textContent = cardData.title;
                    
                    // Update description
                    const descEl = card.querySelector('.card-content p');
                    if (descEl) descEl.textContent = cardData.description;
                    
                    // Update features
                    const featureItems = card.querySelectorAll('.feature-item span');
                    if (featureItems.length > 0 && cardData.features) {
                        cardData.features.forEach((feature, index) => {
                            if (featureItems[index]) {
                                featureItems[index].textContent = feature;
                            }
                        });
                    }
                    
                    // Update button
                    const buttonEl = card.querySelector('.btn-action span');
                    if (buttonEl && cardData.button) {
                        buttonEl.textContent = cardData.button;
                    }
                }
            });

            // Special handling for Learning Hub translations
            const learningCard = document.querySelector('.feature-card.learning');
            if (learningCard) {
                learningCard.querySelector('.learning-title').textContent = t.learningHub;
                learningCard.querySelector('.learning-desc').textContent = t.learningHubDesc;
                learningCard.querySelector('.learning-feature-1').textContent = t.tradingFundamentals;
                learningCard.querySelector('.learning-feature-2').textContent = t.technicalAnalysis;
                learningCard.querySelector('.learning-feature-3').textContent = t.riskManagement;
                learningCard.querySelector('.learning-feature-4').textContent = t.advancedTrading;
                learningCard.querySelector('.learning-button').textContent = t.startLearning;
            }
            
            // Update modal content
            const modal = document.getElementById('dailyUpdateModal');
            if (modal) {
                modal.querySelector('h2').textContent = t.dailyUpdate;
                modal.querySelector('#loadingUpdate p').textContent = t.updateMarketAnalysis;
                modal.querySelector('#updateError p').textContent = t.updateError;
                
                // Update modal specific elements
                const technicalStance = modal.querySelector('.stance-label');
                if (technicalStance) technicalStance.textContent = t.technicalStance;
                
                const metrics = modal.querySelectorAll('.key-metrics .metric span:first-child');
                if (metrics.length >= 3) {
                    metrics[0].textContent = t.rsi;
                    metrics[1].textContent = t.macd;
                    metrics[2].textContent = t.volume;
                }
                
                const priceLabels = modal.querySelectorAll('.price-levels h4');
                if (priceLabels.length >= 2) {
                    priceLabels[0].textContent = t.resistance;
                    priceLabels[1].textContent = t.support;
                }
                
                const catalysts = modal.querySelector('.catalysts h4');
                if (catalysts) catalysts.textContent = t.keyCatalysts;
                
                const risks = modal.querySelector('.risks h4');
                if (risks) risks.textContent = t.keyRisks;
                
                const outlook = modal.querySelector('.outlook h4');
                if (outlook) outlook.textContent = t.outlook;
                
                const events = modal.querySelector('.events h4');
                if (events) events.textContent = t.upcomingEvents;
            }

            // Update all buttons
            document.querySelectorAll('.btn-action span').forEach(btn => {
                const cardType = btn.closest('.feature-card').classList[1];
                const buttonKey = `view${cardType.split('-').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1)).join('')}`;
                if (t[buttonKey]) {
                    btn.textContent = t[buttonKey];
                }
            });
        }
        
        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('preferredLanguage') || 'en';
            document.getElementById('languageSelect').value = savedLang;
            changeLanguage(savedLang);
        });

        document.addEventListener('DOMContentLoaded', function() {
            var modal = document.getElementById('dailyUpdateModal');
            var btn = document.getElementById('openModalBtn');
            var closeBtn = document.getElementById('closeModalBtn');

            btn.onclick = function() {
                modal.style.display = "block";
                checkAndUpdateDailyContent();
            }

            closeBtn.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }

            document.addEventListener('keydown', function(event) {
                if (event.key === "Escape") {
                    modal.style.display = "none";
                }
            });

            async function checkAndUpdateDailyContent() {
                const lastUpdate = localStorage.getItem('lastDailyUpdate');
                const now = new Date().getTime();
                
                // Update if no previous update or if it's been more than 24 hours
                if (!lastUpdate || (now - parseInt(lastUpdate)) > 24 * 60 * 60 * 1000) {
                    const loadingEl = document.getElementById('loadingUpdate');
                    const errorEl = document.getElementById('updateError');
                    const contentEl = document.getElementById('updateContent');
                    
                    try {
                        loadingEl.style.display = 'block';
                        errorEl.style.display = 'none';
                        contentEl.style.display = 'none';

                        // First test if the endpoint is accessible
                        const testResponse = await fetch('http://localhost:3000/api/daily-update/test');
                        if (!testResponse.ok) {
                            throw new Error('Daily update service is not available');
                        }

                        const response = await fetch('http://localhost:3000/api/daily-update', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Accept': 'application/json'
                            }
                        });

                        if (!response.ok) {
                            const errorText = await response.text();
                            console.error('Server response:', errorText);
                            throw new Error(errorText || 'Failed to fetch daily update');
                        }
                        
                        const data = await response.json();
                        console.log('Received update data:', data);
                        updateDailyContent(data);
                        localStorage.setItem('lastDailyUpdate', now.toString());
                        
                        loadingEl.style.display = 'none';
                        errorEl.style.display = 'none';
                        contentEl.style.display = 'block';
                    } catch (error) {
                        console.error('Error updating daily content:', error);
                        loadingEl.style.display = 'none';
                        errorEl.style.display = 'block';
                        contentEl.style.display = 'none';
                        
                        // Show the error message to the user
                        errorEl.querySelector('p').textContent = `Failed to update market analysis: ${error.message}`;
                    }
                }
            }

            function updateDailyContent(data) {
                // Update technical stance
                document.querySelector('.stance-value').textContent = data.technical_stance;
                document.querySelector('.stance-value').className = 
                    `stance-value ${data.technical_stance.toLowerCase()}`;

                // Update metrics
                document.querySelector('[data-metric="rsi"]').textContent = data.metrics.rsi;
                document.querySelector('[data-metric="macd"]').textContent = data.metrics.macd;
                document.querySelector('[data-metric="volume"]').textContent = data.metrics.volume;

                // Update price levels
                const resistanceList = document.querySelector('.resistance ul');
                resistanceList.innerHTML = data.price_levels.resistance
                    .map(price => `<li>${price}</li>`).join('');

                const supportList = document.querySelector('.support ul');
                supportList.innerHTML = data.price_levels.support
                    .map(price => `<li>${price}</li>`).join('');

                // Update catalysts
                const catalystsList = document.querySelector('.catalysts ul');
                catalystsList.innerHTML = data.catalysts
                    .map(catalyst => `<li>${catalyst}</li>`).join('');

                // Update risks
                const risksList = document.querySelector('.risks ul');
                risksList.innerHTML = data.risks
                    .map(risk => `<li>${risk}</li>`).join('');

                // Update outlook
                if (data.market_outlook && data.market_outlook.summary && data.market_outlook.analysis) {
                    document.querySelector('.outlook-summary').textContent = data.market_outlook.summary;
                    const outlookList = document.querySelector('.outlook-analysis');
                    outlookList.innerHTML = data.market_outlook.analysis
                        .map(point => `<li>${point}</li>`).join('');
                } else {
                    console.error('Invalid market outlook data:', data.market_outlook);
                }

                // Update events
                const eventsList = document.querySelector('.events-list');
                eventsList.innerHTML = data.upcoming_events
                    .map(event => {
                        const [title, details] = event.split(': ');
                        return `<li>
                            <span class="event-title">${title}</span>
                            <span class="event-details">${details}</span>
                        </li>`;
                    })
                    .join('');

                // Update sentiment score
                const scoreElement = document.querySelector('.sentiment-score .score');
                scoreElement.textContent = data.sentiment_score;
                scoreElement.className = `score ${getSentimentClass(data.sentiment_score)}`;

                // Update timestamp
                document.querySelector('.last-updated').textContent = 
                    `Updated: ${new Date().toLocaleString()}`;
            }

            function getSentimentClass(score) {
                return score >= 7 ? 'positive' : score >= 4 ? 'neutral' : 'negative';
            }

            // Check for update when page loads
            checkAndUpdateDailyContent();
        });
    </script>
</body>
</html>
